<!DOCTYPE html>
<html>
<head>
	<title>Furry Friend Finder</title>
	
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  	<script src="https://code.jquery.com/jquery.js"></script>
 	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
 	<link href="https://fonts.googleapis.com/css?family=Cabin+Sketch:400,700|Dosis:300,500,700|Hind+Vadodara:300,400,500,700" rel="stylesheet">
 	<link rel="stylesheet" href="/style.css">
</head>
<body>
	<div class="container-fluid">
		<div class="row" id="header">
			<div class="col-xs-6 col-sm-4">
				<div id=title>
					<a href="/"><h2><img class="icon" src="prints.png">FurryFriendFinder</h2></a>
				</div>
			</div>

			<div class="col-xs-6 col-sm-8">
				<div id="nav">
					<a href="/"><button type="button" class="btn btn-default">Home</button></a>
					<a href="/api/friends"><button type="button" class="btn btn-default">API Friends</button></a>
				</div>
			</div>

			<div class="col-xs-0 col-sm-2">
			</div>
		</div>

		<div class="row">
			<div class="col-xs-0 col-sm-2">
			</div>

			<div class="col-xs-12 col-sm-8" id="survey">
				
				<h3><img class="icon2" src="print.png">About You<img class="icon2" src="print.png"></h3>
				<form role="form">
              		<div class="form-group">
						<label for="name">Name (Required)</label>
						<input type="text" class="form-control" id="name" required>
					</div>

					<div class="form-group">
						<label for="photo">Photo URL (Required)</label>
						<input type="text" class="form-control" id="photo" required>
					</div>

					<hr>

					<div class="form-group">
						<label for="q1">1. Your mind is always buzzing with unexplored ideas and plans.</label>
						<select data-placeholder="" type="text" class="form-control chosen-select" id="q1" required>
							<option value=""></option>
				            <option value="1">1 (Strongly Disagree)</option>
				            <option value="2">2</option>
				            <option value="3">3</option>
				            <option value="4">4</option>
				            <option value="5">5 (Strongly Agree)</option>
				       	</select>
					</div>

					<div class="form-group">
						<label for="q2">2. Generally speaking, you rely more on your experience than your imagination.</label>
						<select data-placeholder="" type="text" class="form-control chosen-select" id="q2" required>
							<option value=""></option>
				            <option value="1">1 (Strongly Disagree)</option>
				            <option value="2">2</option>
				            <option value="3">3</option>
				            <option value="4">4</option>
				            <option value="5">5 (Strongly Agree)</option>
				       	</select>
					</div>

					<div class="form-group">
						<label for="q3">3. You find it easy to stay relaxed and focused even when there is a squirrel nearby.</label>
						<select data-placeholder="" type="text" class="form-control chosen-select" id="q3" required>
							<option value=""></option>
				            <option value="1">1 (Strongly Disagree)</option>
				            <option value="2">2</option>
				            <option value="3">3</option>
				            <option value="4">4</option>
				            <option value="5">5 (Strongly Agree)</option>
				       	</select>
					</div>

					<div class="form-group">
						<label for="q4">4. You rarely do something just out of sheer curiosity.</label>
						<select data-placeholder="" type="text" class="form-control chosen-select" id="q4" required>
							<option value=""></option>
				            <option value="1">1 (Strongly Disagree)</option>
				            <option value="2">2</option>
				            <option value="3">3</option>
				            <option value="4">4</option>
				            <option value="5">5 (Strongly Agree)</option>
				       	</select>
					</div>

					<div class="form-group">
						<label for="q5">5. Loud noises can rarely upset you.</label>
						<select data-placeholder="" type="text" class="form-control chosen-select" id="q5" required>
							<option value=""></option>
				            <option value="1">1 (Strongly Disagree)</option>
				            <option value="2">2</option>
				            <option value="3">3</option>
				            <option value="4">4</option>
				            <option value="5">5 (Strongly Agree)</option>
				       	</select>
					</div>

					<div class="form-group">
						<label for="q6">6. You would rather be around small humans than adult humans.</label>
						<select data-placeholder="" type="text" class="form-control chosen-select" id="q6" required>
							<option value=""></option>
				            <option value="1">1 (Strongly Disagree)</option>
				            <option value="2">2</option>
				            <option value="3">3</option>
				            <option value="4">4</option>
				            <option value="5">5 (Strongly Agree)</option>
				       	</select>
					</div>

					<div class="form-group">
						<label for="q7">7. You go out of your way to taste all the new foods in the house even if it could get you in trouble.</label>
						<select data-placeholder="" type="text" class="form-control chosen-select" id="q7" required>
							<option value=""></option>
				            <option value="1">1 (Strongly Disagree)</option>
				            <option value="2">2</option>
				            <option value="3">3</option>
				            <option value="4">4</option>
				            <option value="5">5 (Strongly Agree)</option>
				       	</select>
					</div>

					<div class="form-group">
						<label for="q8">8. You are asleep more often than you are awake.</label>
						<select data-placeholder="" type="text" class="form-control chosen-select" id="q8" required>
							<option value=""></option>
				            <option value="1">1 (Strongly Disagree)</option>
				            <option value="2">2</option>
				            <option value="3">3</option>
				            <option value="4">4</option>
				            <option value="5">5 (Strongly Agree)</option>
				       	</select>
					</div>

					<div class="form-group">
						<label for="q9">9. You love riding in the car!!</label>
						<select data-placeholder="" type="text" class="form-control chosen-select" id="q9" required>
							<option value=""></option>
				            <option value="1">1 (Strongly Disagree)</option>
				            <option value="2">2</option>
				            <option value="3">3</option>
				            <option value="4">4</option>
				            <option value="5">5 (Strongly Agree)</option>
				       	</select>
					</div>

					<div class="form-group">
						<label for="q10">10. You feel more energetic after spending time outside.</label>
						<select data-placeholder="" type="text" class="form-control chosen-select" id="q10" required>
							<option value=""></option>
				            <option value="1">1 (Strongly Disagree)</option>
				            <option value="2">2</option>
				            <option value="3">3</option>
				            <option value="4">4</option>
				            <option value="5">5 (Strongly Agree)</option>
				       	</select>
					</div>

					<button class="btn btn-primary btn-lg btn-block" id="submit">Submit</button>
				</form>
			</div>

			<div class="col-xs-0 col-sm-2">
			</div>

		</div>
	</div>

	<div id="results" class="modal fade" role="dialog">
	  <div class="modal-dialog">

	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal">&times;</button>
	        <h2 class="modal-title"><img class="icon" src="prints.png"><strong>Best Match</strong></h2>
	      </div>
	      <div class="modal-body">
	        <h2 id="match-name"></h2>
	        <img id="match-img">
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
	      </div>
	    </div>

	  </div>
	</div>

</body>
</html>

<script type="text/javascript">
	$("#submit").on("click", function(event) {
		var scoreArray = [];
		//index 0 to get HTML DOM obj from JQuery obj
		if (!$("#name")[0].checkValidity() || !$("#photo")[0].checkValidity()) {
			return;
		}
		for (var i = 1; i < 11; i++) {
			if (!$("#q" + i)[0].checkValidity()) {
				return;
			};
			scoreArray.push(parseInt($("#q" + i).val()));
		};
		event.preventDefault();
		var newUser = {
			name: $("#name").val().trim(),
			photo: $("#photo").val().trim(),
			scores: scoreArray
		};
		$.post("/api/friends", newUser, function(data) {
			if (data) {
				$("#match-name").text(data.name);
	    		$('#match-img').attr("src", data.photo);
		    	$("#results").modal('toggle');
			} else {
				console.log("user add failed");
			}
		});
	});
</script>